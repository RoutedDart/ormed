# Advanced Rendering (Ultraviolet)

Ultraviolet (UV) is Artisanal's high-performance rendering engine. It uses a cell-buffer model and advanced diffing to provide flicker-free, efficient terminal updates.

## How it Works

Unlike traditional TUI rendering which often repaints the entire screen, UV maintains a "current" and "next" buffer of terminal cells. When a frame is rendered, UV:

1.  **Diffs the Buffers**: Identifies exactly which cells have changed.
2.  **Optimizes Movement**: Calculates the most efficient ANSI sequences to move the cursor and update only the changed cells.
3.  **Scroll Optimization**: Detects when lines have been shifted and uses terminal scrolling commands (`IL`/`DL`) to move existing content.

## Enabling UV

You can enable the UV renderer in your `ProgramOptions`:

```dart
final program = tui.Program(
  myModel,
  options: tui.ProgramOptions(
    useUltravioletRenderer: true,
  ),
);
```

## Compositor and Layers

UV includes a powerful composition system that allows you to build your UI using overlapping layers.

```dart
final compositor = Compositor();
compositor.addLayer(Layer(
  id: 'background',
  drawable: myBackground,
));
compositor.addLayer(Layer(
  id: 'popup',
  drawable: myPopup,
  x: 10,
  y: 5,
  z: 100, // Higher Z-index renders on top
));
```
