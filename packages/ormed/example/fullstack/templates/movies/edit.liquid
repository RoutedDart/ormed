{% layout "layouts/base.liquid" %}

{% block title %}Edit Movie{% endblock %}

{% block content %}
<div class="card">
  <h1>Edit movie</h1>
  <p class="muted">Update the catalog entry.</p>

  {% comment %}// #region movies-edit-errors{% endcomment %}
  {% if errors.size > 0 %}
  <div class="error-list">
    <strong>Please fix the following:</strong>
    <ul>
      {% for error in errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}
  {% comment %}// #endregion movies-edit-errors{% endcomment %}

  {% comment %}// #region movies-edit-form{% endcomment %}
  <form method="post" action="/movies/{{ movie.id }}/edit" enctype="multipart/form-data">
    <div class="field">
      <label for="title">Title</label>
      <input id="title" name="title" type="text" value="{{ values.title }}" required />
    </div>

    <div class="field">
      <label for="releaseYear">Release Year</label>
      <input id="releaseYear" name="releaseYear" type="number" min="1888" value="{{ values.releaseYear }}" required />
    </div>

    <div class="field">
      <label for="genreId">Genre</label>
      <select id="genreId" name="genreId">
        <option value="">Select a genre</option>
        {% for genre in genres %}
          <option value="{{ genre.id }}" {% if values.genreId == genre.id %}selected{% endif %}>{{ genre.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="field">
      <label for="summary">Summary</label>
      <textarea id="summary" name="summary" rows="4">{{ values.summary }}</textarea>
    </div>

    <button class="button" type="submit">Save changes</button>
    <a class="button alt" href="/movies/{{ movie.id }}">Cancel</a>
  </form>
  {% comment %}// #endregion movies-edit-form{% endcomment %}
</div>
{% endblock %}
