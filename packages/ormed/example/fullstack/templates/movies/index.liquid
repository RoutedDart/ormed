{% layout "layouts/base.liquid" %}

{% block title %}Movie Catalog{% endblock %}

{% block content %}
{% comment %}// #region movies-index-hero{% endcomment %}
<section class="hero">
  <div class="hero-card">
    <h1>Movie Catalog</h1>
    <p class="muted">A small, intentional archive of stories worth returning to.</p>
    <a class="button" href="/movies/new">Add a movie</a>
  </div>
  <div class="hero-card">
    <h3>Storage + templates + Ormed</h3>
    <p class="muted">This page is rendered with Liquify. Posters are stored via storage_fs.</p>
    <a class="button alt" href="/movies/new">Upload a poster</a>
  </div>
</section>
{% comment %}// #endregion movies-index-hero{% endcomment %}

{% comment %}// #region movies-index-list{% endcomment %}
<div class="grid grid-2">
  {% for movie in movies %}
  <article class="card">
    <h2>{{ movie.title }}</h2>
    <p class="muted">{{ movie.release_year }}{% if movie.genre %} Â· {{ movie.genre.name }}{% endif %}</p>
    {% if movie.poster_url %}
      <img class="poster" src="{{ movie.poster_url }}" alt="Poster for {{ movie.title }}" />
    {% endif %}
    {% if movie.summary %}
      <p>{{ movie.summary }}</p>
    {% endif %}
    <a class="button" href="/movies/{{ movie.id }}">View details</a>
  </article>
  {% endfor %}
</div>
{% comment %}// #endregion movies-index-list{% endcomment %}

{% comment %}// #region movies-index-empty{% endcomment %}
{% if movies.size == 0 %}
  <div class="card">
    <h3>No movies yet.</h3>
    <p class="muted">Add the first entry to start your catalog.</p>
    <a class="button" href="/movies/new">Add movie</a>
  </div>
{% endif %}
{% comment %}// #endregion movies-index-empty{% endcomment %}
{% endblock %}
