services:
  mariadb:
    image: mariadb:11.4
    ports:
      - "6604:3306"
    environment:
      MARIADB_ROOT_PASSWORD: ${MARIADB_ROOT_PASSWORD:-secret}
      MARIADB_DATABASE: orm_test
    healthcheck:
      test:
        ["CMD", "mariadb-admin", "ping", "-h", "localhost", "-p${MARIADB_ROOT_PASSWORD:-secret}"]
      interval: 5s
      timeout: 5s
      retries: 10
    command:
      ["mariadbd", "--character-set-server=utf8mb4", "--collation-server=utf8mb4_unicode_ci"]
