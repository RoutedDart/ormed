---
sidebar_position: 2
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# SQLite

SQLite is the default scaffold for new projects. It runs without external services and is great for local development, CLI tools, and fast integration tests.

## Prerequisites

- [Drivers Overview](./overview)
- [Configuration](../getting-started/configuration)

## What You’ll Learn

- How to run SQLite with generated datasource helpers
- Which SQLite options matter for local dev and tests
- How env-based path configuration (`DB_PATH`) fits into scaffolded config

## Install

Add the driver package:

```yaml
dependencies:
  ormed: ^0.2.0
  ormed_sqlite: ^0.2.0
```

## Configure

```yaml
driver:
  type: sqlite
  options:
    database: database.sqlite   # relative to project root
    session:
      foreign_keys: true
      journal_mode: WAL
    init:
      - PRAGMA busy_timeout = 5000
```

Use this in `ormed.yaml` when you want explicit config-driven CLI/runtime wiring.  
Code-first scaffolds already generate equivalent runtime options in `lib/src/database/config.dart`.

## Use in code (DataSource)

The recommended way is the generated `createDataSource()` helper:

<Tabs groupId="sqlite-usage" defaultValue="generated">
  <TabItem value="generated" label="Generated helper">

```dart file=../../examples/lib/src/database/datasource.dart
```

  </TabItem>
  <TabItem value="manual" label="Manual adapter">

```dart file=../../examples/lib/drivers/sqlite.dart#sqlite-datasource
```

  </TabItem>
</Tabs>

## SQLite Migrations Helpers

Import the SQLite migrations entrypoint to use SQLite-specific column aliases:

```dart
import 'package:ormed_sqlite/migrations.dart';
```

Available helpers:
- `blob()` → BLOB (alias for `binary()`)
- `real()` → REAL (alias for `float()`)
- `numeric()` → NUMERIC (alias for `decimal()`)

### In-memory (tests)

```dart file=../../examples/lib/drivers/sqlite.dart#sqlite-inmemory
```

### Options

| Option | Type | Default | Description |
| --- | --- | --- | --- |
| `database` | `String` | `database.sqlite` | Path to the `.sqlite` file (relative to project root or absolute). |
| `path` | `String?` | — | Alias for `database` used by some programmatic helpers. |
| `memory` | `bool` | `false` | When true, connects to an in-memory database (tests / ephemeral usage). |
| `session` | `Map<String, Object?>` | `{}` | Session pragmas applied via `PRAGMA key = value`. |
| `init` | `List<String>` | `[]` | SQL statements executed after connecting. |

## Environment Variables

SQLite does not require network credentials. For scaffolded projects, generated `config.dart` reads:

- `DB_PATH`: SQLite file path (`database/<package>.sqlite` fallback by default)

If you keep `ormed.yaml`, interpolation is also supported:

- `${DB_PATH}` and `${DB_PATH:-database/app.sqlite}`

### Notes

- The adapter automatically enables `RETURNING` support and schema inspection.
- Migrations and seeds default to convention registries (`lib/src/database/*`) and can be overridden via `ormed.yaml`.
- For plan/previews/schema internals, see Drivers → Internals.

## Extensions

Driver extensions let you register custom clause compilers for SQLite queries.

```dart file=../../examples/lib/drivers/extensions.dart#sqlite-extension-definition
```

```dart file=../../examples/lib/drivers/extensions.dart#sqlite-extension-usage
```

## Read This Next

- [PostgreSQL](./postgres), [MySQL](./mysql), or [D1](./d1) for non-local runtimes
- [Guide: Testing](../guides/testing)
