---
sidebar_position: 5
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Model Scopes

Scopes package reusable query constraints on a model. Ormed supports:
- **Generated scopes** (declared on the model with `@OrmScope`)
- **Inline scopes** (registered at runtime on a `ScopeRegistry`)

:::note Snippet context
- The examples focus on the *scope-related lines* and omit full bootstrapping.
- Where setup is required, the snippet calls `bootstrapOrm()` to wire generated registrations.
:::

<Tabs groupId="model-scopes" defaultValue="generated">
  <TabItem value="generated" label="Generated">

Define scopes as **static** methods that accept a `Query<$Model>` as the first parameter.

Global scopes apply to every query for the model:

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-global
```

Local scopes are opt-in and can accept positional or named arguments:

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-local-positional
```

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-local-named
```

Register generated scopes once during bootstrap:

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-register
```

Use generated query helpers:

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-query-local
```

Global scopes apply automatically:

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-query-global
```

Disable a specific global scope when needed:

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-query-without-global
```

  </TabItem>
  <TabItem value="inline" label="Inline">

Inline scopes are useful for environment-specific behavior and tests. Register them on a `ScopeRegistry` (usually via `context.scopeRegistry`).

Register scopes:

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-inline-register
```

Apply them via `scope('name', args)` (and disable globals the same way as generated scopes):

```dart file=../../examples/lib/models/model_scopes.dart#model-scopes-inline-usage
```

  </TabItem>
</Tabs>

## Rules & notes

- **Static only**: scopes must be `static` so both the user model type and generated `$Model` query APIs can reference them consistently.
- **Global scopes must be argument-free** (beyond the initial `Query<T>`).
- Identifiers default to the method name; override with `@OrmScope(identifier: 'custom')` when needed.

