---
title: Templates & Storage
sidebar_position: 6
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Templates & Storage

A full-stack application needs a way to render dynamic HTML and handle file uploads. We use **Liquify** for templating and **File Cloud** for storage.

## Prerequisites

- [Server & Web Routes](./server-routes)

## What Youâ€™ll Learn

- How template rendering is structured for reuse
- How layout inheritance keeps UI consistent
- How file storage is integrated into request flows

## Step Outcome

By the end of this page, you should have:

- A shared template renderer used by all handlers
- Consistent base layout + page templates for movies/genres
- Poster upload handling backed by `StorageService`

## Template renderer

We wrap the Liquify engine in a `TemplateRenderer` class. This allows us to provide "shared data" (like the application name or current user) to all templates automatically.

```dart file=../../../../packages/ormed/example/fullstack/lib/src/templates/template_renderer.dart#template-renderer

```

The renderer abstraction keeps handlers focused on data, not template engine setup.

## Layout shell

Liquify supports layout inheritance, which means you can define a base "shell" for your application and have other templates "extend" it. This keeps your UI consistent and reduces duplication.

<Tabs groupId="layout">
  <TabItem value="header" label="Header">
    The header contains the navigation bar and is shared across all pages.
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/layouts/base.liquid#layout-header
    ```
  </TabItem>
  <TabItem value="content" label="Content slot">
    The `{% block content %}` tag is where the specific page content will be injected.
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/layouts/base.liquid#layout-content
    ```
  </TabItem>
</Tabs>

## Movie catalog

The movie catalog page iterates over a list of movies and displays them in a grid.

<Tabs groupId="movies-index">
  <TabItem value="hero" label="Hero">
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/movies/index.liquid#movies-index-hero
    ```
  </TabItem>
  <TabItem value="list" label="List">
    We use a `{% for movie in movies %}` loop to render each movie card.
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/movies/index.liquid#movies-index-list
    ```
  </TabItem>
  <TabItem value="empty" label="Empty state">
    If no movies are found, we show a friendly message.
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/movies/index.liquid#movies-index-empty
    ```
  </TabItem>
</Tabs>

## Movie detail

The detail page shows more information about a specific movie, including its genre and summary.

<Tabs groupId="movies-show">
  <TabItem value="header" label="Header">
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/movies/show.liquid#movies-show-header
    ```
  </TabItem>
  <TabItem value="actions" label="Actions">
    Buttons for editing or deleting the movie.
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/movies/show.liquid#movies-show-actions
    ```
  </TabItem>
</Tabs>

## Movie forms

We use the same form fields for both creating and editing movies.

<Tabs groupId="movie-forms">
  <TabItem value="new" label="Create form">
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/movies/new.liquid#movies-form-fields
    ```
  </TabItem>
  <TabItem value="edit" label="Edit form">
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/movies/edit.liquid#movies-edit-form
    ```
  </TabItem>
</Tabs>

## File Storage

We use the `StorageService` to handle movie poster uploads. In development, this saves files to a local `uploads/` directory. In production, you could easily swap this for an S3 or Google Cloud Storage implementation without changing your application logic.

<Tabs groupId="storage">
  <TabItem value="init" label="Initialization">
    The storage service initializes a local disk driver and optionally connects to S3-compatible cloud storage.
    ```dart file=../../../../packages/ormed/example/fullstack/lib/src/storage/storage.dart#storage-init
    ```
  </TabItem>
  <TabItem value="save" label="Saving Files">
    Files are saved with a timestamp prefix to ensure unique filenames.
    ```dart file=../../../../packages/ormed/example/fullstack/lib/src/storage/storage.dart#storage-save
    ```
  </TabItem>
</Tabs>

### Upload flow in this tutorial

1. Handler parses multipart form input.
2. Poster file is passed to `StorageService`.
3. Service writes to local disk (`uploads/`) for development.
4. Stored path/URL is saved via DTO into the database.

## Genre pages

Genre pages follow a similar pattern to the movie pages.

<Tabs groupId="genre-pages">
  <TabItem value="list" label="Genres list">
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/genres/index.liquid#genres-index-list
    ```
  </TabItem>
  <TabItem value="empty" label="Empty state">
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/genres/index.liquid#genres-index-empty
    ```
  </TabItem>
  <TabItem value="detail" label="Genre detail">
    ```liquid file=../../../../packages/ormed/example/fullstack/templates/genres/show.liquid#genres-show-header
    ```
  </TabItem>
</Tabs>
